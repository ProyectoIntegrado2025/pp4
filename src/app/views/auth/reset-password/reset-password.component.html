<!-- <section class="vh-100 gradient-custom">
  <div class="container py-5 h-100">
    <div class="row d-flex justify-content-center align-items-center h-100">
      <div class="col-12 col-md-8 col-lg-6 col-xl-5">
        <div class="card bg-dark text-white" style="border-radius: 1rem;">
          <div class="card-body p-5 text-center"> -->

            <!-- Mensajes de Estado (Error, Éxito, Cargando) -->
<!--             <div *ngIf="cargando" class="mb-3 text-warning">
              <div class="spinner-border" role="status">
                <span class="visually-hidden">Cargando...</span>
              </div>
            </div>
            <div *ngIf="mensajeError" class="alert alert-danger mb-4">{{ mensajeError }}</div>
            <div *ngIf="mensajeExito" class="alert alert-success mb-4">{{ mensajeExito }}</div>
 -->
            <!-- --------------------------------------- -->
            <!-- VISTA 1: SOLICITAR EMAIL (PASO 1) -->
            <!-- --------------------------------------- -->
<!--             <div *ngIf="!mostrarFormularioConfirmacion">
              <div class="mb-md-5 mt-md-4 pb-5">
                <h2 class="fw-bold mb-2 text-uppercase">Restablecer Contraseña</h2>
                <p class="text-white-50 mb-5">Ingresa tu email y te enviaremos un código de verificación.</p>

                <form [formGroup]="resetForm" (ngSubmit)="sendCode()"> -->
                  <!-- Campo de Email -->
<!--                   <div class="form-outline form-white mb-4">
                    <input type="email" placeholder="Email" id="email" formControlName="email" class="form-control form-control-lg" />
                    <label class="form-label d-none" for="email">Email</label>
                    <div *ngIf="errorControlReset['email'].touched && errorControlReset['email'].invalid" class="text-danger text-start">
                      <div *ngIf="errorControlReset['email'].errors?.['required']">Email requerido.</div>
                      <div *ngIf="errorControlReset['email'].errors?.['email']">El email debe ser válido.</div>
                    </div>
                  </div>

                  <button [disabled]="resetForm.invalid || cargando" type="submit" class="btn btn-outline-light btn-lg px-5">
                    Enviar Código
                  </button>
                </form>
              </div> -->

              <!-- Enlace a Login -->
<!--               <div>
                <p class="mb-0">
                  <a [routerLink]="['/login']" class="text-white-50 fw-bold">Volver al inicio de sesión</a>
                </p>
              </div>
            </div> -->

            <!-- --------------------------------------- -->
            <!-- VISTA 2: CONFIRMAR CÓDIGO (PASO 2) -->
            <!-- --------------------------------------- -->
<!--             <div *ngIf="mostrarFormularioConfirmacion">
              <div class="mb-md-5 mt-md-4 pb-5">
                <h2 class="fw-bold mb-2 text-uppercase">Confirmar nueva Contraseña</h2>
                <p class="text-white-50 mb-5">Ingresa el código enviado a {{ confirmForm.get('email')?.value }} y tu nueva contraseña.</p>

                <form [formGroup]="confirmForm" (ngSubmit)="confirmNewPassword()"> -->
                  
                  <!-- Email (Solo lectura) -->
<!--                   <div class="form-outline form-white mb-4"> -->
                    <!-- Se elimina el atributo 'disabled' del HTML para resolver el error TS2322 -->
<!--                     <input type="email" placeholder="Email" id="confirmEmail" formControlName="email" class="form-control form-control-lg" />
                    <label class="form-label d-none" for="confirmEmail">Email</label>
                  </div> -->

                  <!-- Campo de Código -->
<!--                   <div class="form-outline form-white mb-4">
                    <input type="text" placeholder="Código de Verificación" id="code" formControlName="code" class="form-control form-control-lg" />
                    <label class="form-label d-none" for="code">Código</label>
                    <div *ngIf="errorControlConfirm['code'].touched && errorControlConfirm['code'].invalid" class="text-danger text-start">
                      <div *ngIf="errorControlConfirm['code'].errors?.['required']">Código requerido.</div>
                      <div *ngIf="errorControlConfirm['code'].errors?.['minlength'] || errorControlConfirm['code'].errors?.['maxlength']">El código debe ser de 6 dígitos.</div>
                    </div>
                  </div> -->

                  <!-- Campo de Nueva Contraseña -->
<!--                   <div class="form-outline form-white mb-4">
                    <input type="password" placeholder="Nueva Contraseña" id="newPassword" formControlName="newPassword" class="form-control form-control-lg" />
                    <label class="form-label d-none" for="newPassword">Nueva Contraseña</label>
                    <div *ngIf="errorControlConfirm['newPassword'].touched && errorControlConfirm['newPassword'].invalid" class="text-danger text-start">
                      <p *ngIf="errorControlConfirm['newPassword'].errors?.['required']">Contraseña requerida.</p>
                      <p *ngIf="errorControlConfirm['newPassword'].errors?.['pattern']">La contraseña debe tener:<br>- Al menos 8 caracteres.<br>- Al menos una mayúscula.<br>- Al menos un número.<br>- Al menos un símbolo.</p>
                    </div>
                  </div> -->

                  <!-- Campo de Confirmar Contraseña -->
<!--                   <div class="form-outline form-white mb-4">
                    <input type="password" placeholder="Confirmar Contraseña" id="confirmPassword" formControlName="confirmPassword" class="form-control form-control-lg" />
                    <label class="form-label d-none" for="confirmPassword">Confirmar Contraseña</label>
                    <div *ngIf="confirmForm.errors?.['passwordMismatch'] && errorControlConfirm['confirmPassword'].touched" class="text-danger text-start">
                      Las contraseñas no coinciden.
                    </div>
                    <div *ngIf="errorControlConfirm['confirmPassword'].errors?.['required'] && errorControlConfirm['confirmPassword'].touched" class="text-danger text-start">
                      Confirmación de contraseña requerida.
                    </div>
                  </div> -->

                  <!-- Enlace para Reenviar Código (Restaurado) -->
<!--                   <p class="small mb-4 pb-lg-2">
                    <a (click)="sendCode(true)" class="text-white-50 fw-bold" style="cursor: pointer;">
                      Reenviar Código
                    </a>
                  </p>

                  <button [disabled]="confirmForm.invalid || cargando" type="submit" class="btn btn-outline-light btn-lg px-5">
                    Cambiar Contraseña
                  </button>
                </form>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</section> -->

<main>
   
            <!-- Mensajes de Estado (Error, Éxito, Cargando) -->
            <div *ngIf="cargando" class="mb-3 text-warning">
              <div class="spinner-border" role="status">
                <span class="visually-hidden">Cargando...</span>
              </div>
            </div>
            <div *ngIf="mensajeError" class="alert alert-danger mb-4">{{ mensajeError }}</div>
            <div *ngIf="mensajeExito" class="alert alert-success mb-4">{{ mensajeExito }}</div>

  <!-- Componente exportado theme-toggle -->
<app-theme-toggle class="global-toggle"></app-theme-toggle>


            <!-- --------------------------------------- -->
            <!-- VISTA 1: SOLICITAR EMAIL (PASO 1) -->
            <!-- --------------------------------------- -->
  <div class="cardResetpw cardLogin" *ngIf="!mostrarFormularioConfirmacion">

    <!-- IMG DE FONDO -->
    <img class="imglogoback" src="../../../../assets/logos/logo.png" alt="logo">

    <!-- Texto previo al input email y su form -->
    <div class="cardResetpwText">
        <h2>RESTABLECER CONTRASEÑA</h2>
        <p>Ingresa tu email y te enviaremos un código de verificación</p>
    </div>

    <!-- Contiene el formulario y button -->
    <div class="cardForm">
         
        <form [formGroup]="resetForm" (ngSubmit)="sendCode()">
            <!-- Email a ingresar para enviar código de reset pw -->
            <input type="email" placeholder="Email" id="email" formControlName="email"/>

                  <!-- Validadores email -->
                  <div class="validatorsLogin" *ngIf="errorControlReset['email'].touched && errorControlReset['email'].invalid">
                      <div *ngIf="errorControlReset['email'].errors?.['required']">Email requerido.</div>
                      <div *ngIf="errorControlReset['email'].errors?.['email']">El email debe ser válido.</div>
                  </div>

              <button class="btnEnviarCod" [disabled]="resetForm.invalid || cargando" type="submit">
              <img class="imgEnviarCod" src="../../../../assets/login/botonEnviar.png" alt="Enviar Código">
              </button>
        </form>

        <div class="cardResetpwTextback colorall">    
            <a [routerLink]="['/login']">Volver al inicio de sesión</a>
        </div>

    </div>

  </div>
 

            <!-- --------------------------------------- -->
            <!-- VISTA 2: CONFIRMAR CÓDIGO (PASO 2) -->
            <!-- --------------------------------------- -->
  <div class="cardResetpw cardLogin" *ngIf="mostrarFormularioConfirmacion">

    <!-- IMG DE FONDO -->
    <img class="imglogoback" src="../../../../assets/logos/logo.png" alt="logo">

    <!-- Texto previo los inputs y su form -->
    <div class="cardResetpwText">
        <h2>CAMBIO DE CONTRASEÑA</h2>
        <p>Ingresa el código enviado a {{ confirmForm.get('email')?.value }} y tu nueva contraseña.</p>
    </div>

    <!-- Contiene el formulario y button -->
    <div class="cardForm">
         
        <form [formGroup]="confirmForm" (ngSubmit)="confirmNewPassword()">
                  
                  <!-- Email (Solo lectura) -->
                    <!-- Se elimina el atributo 'disabled' del HTML para resolver el error TS2322 -->
                    <input type="email" placeholder="Email" id="confirmEmail" formControlName="email" [readonly]="true"/>
                    <label for="confirmEmail"></label>
       

                  <!-- Campo de Código -->
                    <input type="text" placeholder="Código de Verificación" id="code" formControlName="code"/>
                    <label for="code"></label>
                    <div class="validatorsLogin" *ngIf="errorControlConfirm['code'].touched && errorControlConfirm['code'].invalid">
                      <div *ngIf="errorControlConfirm['code'].errors?.['required']">Código de verificación requerido</div>
                      <div *ngIf="errorControlConfirm['code'].errors?.['minlength'] || errorControlConfirm['code'].errors?.['maxlength']">El código debe ser de 6 dígitos.</div>
                    </div>
         

                  <!-- Campo de Nueva Contraseña --> 
                    <input type="password" placeholder="Nueva Contraseña" id="newPassword" formControlName="newPassword"/>
                    <label for="newPassword"></label>
                    <div class="validatorsLogin" *ngIf="errorControlConfirm['newPassword'].touched && errorControlConfirm['newPassword'].invalid">
                      <div *ngIf="errorControlConfirm['newPassword'].errors?.['required']">Contraseña requerida</div>
                      <div *ngIf="errorControlConfirm['newPassword'].errors?.['pattern']">La contraseña debe tener:<br>- Al menos 8 caracteres<br>- Al menos una mayúscula<br>- Al menos un número<br>- Al menos un símbolo</div>
                    </div>
       

                  <!-- Campo de Confirmar Contraseña -->
                    <input type="password" placeholder="Confirmar Contraseña" id="confirmPassword" formControlName="confirmPassword"/>
                    <label for="confirmPassword"></label>
                    <div class="validatorsLogin" *ngIf="confirmForm.errors?.['passwordMismatch'] && errorControlConfirm['confirmPassword'].touched" >
                      Las contraseñas no coinciden
                    </div>
                    <div class="validatorsLogin" *ngIf="errorControlConfirm['confirmPassword'].errors?.['required'] && errorControlConfirm['confirmPassword'].touched" >
                      Confirmar contraseña requerido
                    </div>
                 

                  <!-- Enlace para Reenviar Código (Restaurado) -->
                  <div class="cardResendCod">
                    <a class="colorall" (click)="sendCode(true)">
                      Reenviar Código
                    </a>
                  </div>                   
                  

                  <!-- <button [disabled]="confirmForm.invalid || cargando" type="submit">
                    Cambiar Contraseña
                  </button> -->
              <button class="btnConfirmarCod" [disabled]="confirmForm.invalid || cargando" type="submit">
                  <img class="imgConfirmarCod" src="../../../../assets/login/botonConfirmar.png" alt="Confirmar">
              </button>
          </form>

    </div>

  </div>


</main>