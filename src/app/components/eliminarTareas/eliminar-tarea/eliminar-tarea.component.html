<div class="header d-flex justify-content-between align-items-center mb-4">
  <div class="headerL">
    <h2>Eliminar Tareas</h2>
    <button class="btn btn-outline-primary btn-sm" (click)="loadTasks()">
      Actualizar
      <img
        class="iconActualizaTarea ms-1"
        src="../../../../assets/iconos/iconActualizaTarea.png"
        alt="Actualizar"
      />
    </button>
  </div>

  <div class="headerR">
    <label class="me-2 fw-bold">Buscar:</label>
    <input
      type="text"
      placeholder="Buscar por título..."
      class="form-control d-inline-block w-auto"
      (input)="buscarTarea($event)"
    />
  </div>
</div>

<div *ngIf="cargando" class="text-center mt-4 text-primary">
  <div class="spinner-border" role="status"></div>
  <p>Cargando tareas...</p>
</div>

<div *ngIf="!cargando && tareas.length === 0" class="text-center mt-4 text-muted">
  <p>No hay tareas para mostrar.</p>
</div>

<div *ngIf="!cargando && tareas.length > 0" class="container">
  <div class="card mb-3" *ngFor="let tarea of tareas">
    <div class="card-body">
      <h5 class="card-title">{{ tarea.Titulo }}</h5>
      <p class="card-text mb-1"><strong>Prioridad:</strong> {{ tarea.Prioridad }}</p>
      <p class="card-text mb-1"><strong>Estado:</strong> {{ tarea.Estado }}</p>
      <p class="card-text mb-1"><strong>Inicio:</strong> {{ tarea.FechaInicio }}</p>
      <p class="card-text mb-1"><strong>Fin:</strong> {{ tarea.FechaFin }}</p>

      <div *ngIf="tarea.Pasos?.length">
        <strong>Pasos:</strong>
        <ul class="list-group list-group-flush small">
          <li *ngFor="let paso of tarea.Pasos" class="list-group-item">
            {{ paso }}
          </li>
        </ul>
      </div>

      <div class="text-end mt-3">
        <button
          class="btn btn-danger btn-sm"
          (click)="deleteTask(tarea.TareaId)"
          [disabled]="cargando"
        >
          <img
            class="iconEliminarTarea me-1"
            src="../../../../assets/iconos/iconEliminarTarea.png"
            alt="Eliminar"
          />
          Eliminar
        </button>
      </div>
    </div>
  </div>
</div>

<div *ngIf="mensaje" class="alert alert-success mt-3 text-center">
  {{ mensaje }}
</div>

<div *ngIf="error" class="alert alert-danger mt-3 text-center">
  Ocurrió un error al eliminar la tarea.
</div>
